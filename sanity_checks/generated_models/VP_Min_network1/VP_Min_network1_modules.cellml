<?xml version='1.0' encoding='UTF-8'?>
<model name="modules" xmlns="http://www.cellml.org/cellml/1.1#" xmlns:cellml="http://www.cellml.org/cellml/1.1#" xmlns:xlink="http://www.w3.org/1999/xlink">
<!--&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;module_units&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;//-->
<import xlink:href="VP_Min_network1_units.cellml">
    <units name="s2" units_ref="s2"/>
    <units name="Hz" units_ref="Hz"/>
    <units name="millis" units_ref="millis"/>
    <units name="per_millis" units_ref="per_millis"/>
    <units name="mm" units_ref="mm"/>
    <units name="m2" units_ref="m2"/>
    <units name="mm2" units_ref="mm2"/>
    <units name="m3" units_ref="m3"/>
    <units name="m4" units_ref="m4"/>
    <units name="mm3" units_ref="mm3"/>
    <units name="J_per_s" units_ref="J_per_s"/>
    <units name="mol_per_s" units_ref="mol_per_s"/>
    <units name="mmol_per_s" units_ref="mmol_per_s"/>
    <units name="umol_per_s" units_ref="umol_per_s"/>
    <units name="C_per_s" units_ref="C_per_s"/>
    <units name="mC_per_s" units_ref="mC_per_s"/>
    <units name="uC_per_s" units_ref="uC_per_s"/>
    <units name="nC_per_s" units_ref="nC_per_s"/>
    <units name="Cm_per_millis" units_ref="Cm_per_millis"/>
    <units name="m_per_s" units_ref="m_per_s"/>
    <units name="mm_per_s" units_ref="mm_per_s"/>
    <units name="um_per_s" units_ref="um_per_s"/>
    <units name="rad_per_s" units_ref="rad_per_s"/>
    <units name="m3_per_s" units_ref="m3_per_s"/>
    <units name="mL" units_ref="mL"/>
    <units name="per_milliL_s" units_ref="per_milliL_s"/>
    <units name="s_per_m3" units_ref="s_per_m3"/>
    <units name="s_per_milliV" units_ref="s_per_milliV"/>
    <units name="s_per_millis" units_ref="s_per_millis"/>
    <units name="millis_per_s" units_ref="millis_per_s"/>
    <units name="mm3_per_s" units_ref="mm3_per_s"/>
    <units name="l_per_s" units_ref="l_per_s"/>
    <units name="per_ml_s" units_ref="per_ml_s"/>
    <units name="J_per_mol" units_ref="J_per_mol"/>
    <units name="J_per_kmol_K" units_ref="J_per_kmol_K"/>
    <units name="J_per_M" units_ref="J_per_M"/>
    <units name="J_per_C" units_ref="J_per_C"/>
    <units name="J_per_C_s" units_ref="J_per_C_s"/>
    <units name="J_per_m" units_ref="J_per_m"/>
    <units name="J_per_m3" units_ref="J_per_m3"/>
    <units name="mmHg" units_ref="mmHg"/>
    <units name="per_mmHg" units_ref="per_mmHg"/>
    <units name="mmHg2" units_ref="mmHg2"/>
    <units name="Pa_per_mmHg" units_ref="Pa_per_mmHg"/>
    <units name="m3_per_J" units_ref="m3_per_J"/>
    <units name="J_per_m3s" units_ref="J_per_m3s"/>
    <units name="m3_per_Js" units_ref="m3_per_Js"/>
    <units name="J2_per_m6" units_ref="J2_per_m6"/>
    <units name="Js2_per_C2" units_ref="Js2_per_C2"/>
    <units name="Js2_per_mol2" units_ref="Js2_per_mol2"/>
    <units name="Js_per_mol2" units_ref="Js_per_mol2"/>
    <units name="Js_per_C2" units_ref="Js_per_C2"/>
    <units name="J_per_mol2" units_ref="J_per_mol2"/>
    <units name="C2_per_J_s" units_ref="C2_per_J_s"/>
    <units name="J_per_C2" units_ref="J_per_C2"/>
    <units name="C2_per_J" units_ref="C2_per_J"/>
    <units name="mol_per_m3" units_ref="mol_per_m3"/>
    <units name="M" units_ref="M"/>
    <units name="mM" units_ref="mM"/>
    <units name="milliM" units_ref="milliM"/>
    <units name="uM" units_ref="uM"/>
    <units name="kg_per_m3" units_ref="kg_per_m3"/>
    <units name="m3_per_kg" units_ref="m3_per_kg"/>
    <units name="per_m3" units_ref="per_m3"/>
    <units name="mol_per_m2_s" units_ref="mol_per_m2_s"/>
    <units name="mM_m_per_s" units_ref="mM_m_per_s"/>
    <units name="J_per_m2_s" units_ref="J_per_m2_s"/>
    <units name="Js_per_m4" units_ref="Js_per_m4"/>
    <units name="mM_per_s" units_ref="mM_per_s"/>
    <units name="per_s" units_ref="per_s"/>
    <units name="per_mM_s" units_ref="per_mM_s"/>
    <units name="m6_per_mol2_s" units_ref="m6_per_mol2_s"/>
    <units name="m3_per_mol" units_ref="m3_per_mol"/>
    <units name="mol_per_m3_s" units_ref="mol_per_m3_s"/>
    <units name="per_mol" units_ref="per_mol"/>
    <units name="J_per_mol_K" units_ref="J_per_mol_K"/>
    <units name="m2_per_s" units_ref="m2_per_s"/>
    <units name="per_C" units_ref="per_C"/>
    <units name="per_m" units_ref="per_m"/>
    <units name="per_mM" units_ref="per_mM"/>
    <units name="Js2_per_m2" units_ref="Js2_per_m2"/>
    <units name="Js_per_m2" units_ref="Js_per_m2"/>
    <units name="J_per_m2" units_ref="J_per_m2"/>
    <units name="m_per_s2" units_ref="m_per_s2"/>
    <units name="rad_per_s2" units_ref="rad_per_s2"/>
    <units name="Js_per_m3" units_ref="Js_per_m3"/>
    <units name="Js2_per_m5" units_ref="Js2_per_m5"/>
    <units name="m5_per_Js2" units_ref="m5_per_Js2"/>
    <units name="J_per_m6" units_ref="J_per_m6"/>
    <units name="m6_per_J" units_ref="m6_per_J"/>
    <units name="m6_per_Js" units_ref="m6_per_Js"/>
    <units name="mm6_per_J" units_ref="mm6_per_J"/>
    <units name="Js2_per_m9" units_ref="Js2_per_m9"/>
    <units name="m6s_per_J" units_ref="m6s_per_J"/>
    <units name="Js_per_m6" units_ref="Js_per_m6"/>
    <units name="Js2_per_m6" units_ref="Js2_per_m6"/>
    <units name="m3_per_s2" units_ref="m3_per_s2"/>
    <units name="mm3_per_s2" units_ref="mm3_per_s2"/>
    <units name="per_mm3" units_ref="per_mm3"/>
    <units name="UnitValve" units_ref="UnitValve"/>
    <units name="J_per_m9" units_ref="J_per_m9"/>
    <units name="milliV" units_ref="milliV"/>
    <units name="per_milliV" units_ref="per_milliV"/>
    <units name="millis_per_milliV" units_ref="millis_per_milliV"/>
    <units name="per_V" units_ref="per_V"/>
    <units name="milliV_per_V" units_ref="milliV_per_V"/>
    <units name="V_per_milliV" units_ref="V_per_milliV"/>
    <units name="V_per_s" units_ref="V_per_s"/>
    <units name="milliV_per_kiloV" units_ref="milliV_per_kiloV"/>
    <units name="V2" units_ref="V2"/>
    <units name="milliV2" units_ref="milliV2"/>
    <units name="millimol" units_ref="millimol"/>
    <units name="millimolar" units_ref="millimolar"/>
    <units name="per_millimolar" units_ref="per_millimolar"/>
    <units name="per_millimolar_s" units_ref="per_millimolar_s"/>
    <units name="per_millimolar2_s" units_ref="per_millimolar2_s"/>
    <units name="millimolar_per_s" units_ref="millimolar_per_s"/>
    <units name="millimolar_per_megamolar" units_ref="millimolar_per_megamolar"/>
    <units name="per_millimol_milliS" units_ref="per_millimol_milliS"/>
    <units name="per_millimol_millis" units_ref="per_millimol_millis"/>
    <units name="per_millimol_s" units_ref="per_millimol_s"/>
    <units name="microm" units_ref="microm"/>
    <units name="microS" units_ref="microS"/>
    <units name="microm3" units_ref="microm3"/>
    <units name="m3_per_microm3" units_ref="m3_per_microm3"/>
    <units name="picoF" units_ref="picoF"/>
    <units name="S_per_F" units_ref="S_per_F"/>
    <units name="m3_per_Fs" units_ref="m3_per_Fs"/>
    <units name="A_per_F" units_ref="A_per_F"/>
    <units name="megaOhm" units_ref="megaOhm"/>
    <units name="nanoA" units_ref="nanoA"/>
    <units name="nanoA_per_milliA" units_ref="nanoA_per_milliA"/>
    <units name="nanoA_per_A" units_ref="nanoA_per_A"/>
    <units name="A_per_nanoA" units_ref="A_per_nanoA"/>
    <units name="C_per_mol" units_ref="C_per_mol"/>
    <units name="m3_per_J_millis" units_ref="m3_per_J_millis"/>
    <units name="m3_per_mol_millis" units_ref="m3_per_mol_millis"/>
    <units name="m3_per_millimol_s" units_ref="m3_per_millimol_s"/>
    <units name="millimol_per_m3" units_ref="millimol_per_m3"/>
    <units name="Hz2" units_ref="Hz2"/>
    <units name="cm" units_ref="cm"/>
    <units name="J_per_m4_s" units_ref="J_per_m4_s"/>
    <units name="m3_per_mol_per_sec" units_ref="m3_per_mol_per_sec"/>
    <units name="mol_per_m3_per_kPa" units_ref="mol_per_m3_per_kPa"/>
    <units name="mol_per_m3_per_Pa" units_ref="mol_per_m3_per_Pa"/>
    <units name="m3_per_mol_per_s" units_ref="m3_per_mol_per_s"/>
    <units name="mol_per_m3_per_s" units_ref="mol_per_m3_per_s"/>
    <units name="dim" units_ref="dim"/>
    <units name="fmol" units_ref="fmol"/>
    <units name="per_fmol" units_ref="per_fmol"/>
    <units name="nJ_per_s" units_ref="nJ_per_s"/>
    <units name="fmol_per_s" units_ref="fmol_per_s"/>
    <units name="nC_per_fmol" units_ref="nC_per_fmol"/>
    <units name="nC" units_ref="nC"/>
    <units name="nJ_per_fmol" units_ref="nJ_per_fmol"/>
    <units name="nJ_per_nC" units_ref="nJ_per_nC"/>
    <units name="fC" units_ref="fC"/>
    <units name="fF" units_ref="fF"/>
    <units name="volt_per_sec" units_ref="volt_per_sec"/>
    <units name="J_per_K_per_mol" units_ref="J_per_K_per_mol"/>
    <units name="nS" units_ref="nS"/>
    <units name="nSmV" units_ref="nSmV"/>
    <units name="per_ms" units_ref="per_ms"/>
    <units name="mM4" units_ref="mM4"/>
    <units name="mM_per_ms" units_ref="mM_per_ms"/>
    <units name="mMms" units_ref="mMms"/>
    <units name="per_mMms" units_ref="per_mMms"/>
    <units name="molar" units_ref="molar"/>
    <units name="micromolar" units_ref="micromolar"/>
    <units name="nanomolar" units_ref="nanomolar"/>
    <units name="ms" units_ref="ms"/>
    <units name="m_cubed" units_ref="m_cubed"/>
    <units name="mV" units_ref="mV"/>
    <units name="m_cubed_per_second" units_ref="m_cubed_per_second"/>
    <units name="micromolar_m_cubed" units_ref="micromolar_m_cubed"/>
    <units name="C" units_ref="C"/>
    <units name="C_per_millimol" units_ref="C_per_millimol"/>
    <units name="picoA" units_ref="picoA"/>
    <units name="picoA_per_picoFarad" units_ref="picoA_per_picoFarad"/>
    <units name="microL" units_ref="microL"/>
    <units name="picoFarad" units_ref="picoFarad"/>
    <units name="cm3_per_second" units_ref="cm3_per_second"/>
    <units name="um3_per_second" units_ref="um3_per_second"/>
    <units name="m3mM" units_ref="m3mM"/>
    <units name="ms2" units_ref="ms2"/>
    <units name="nM3_per_ps" units_ref="nM3_per_ps"/>
    <units name="per_s_squared_m_cubed" units_ref="per_s_squared_m_cubed"/>
    <units name="per_meters_cubed" units_ref="per_meters_cubed"/>
    <units name="umeter3" units_ref="umeter3"/>
    <units name="mill1" units_ref="mill1"/>
    <units name="picoV" units_ref="picoV"/>
    <units name="pic0" units_ref="pic0"/>
    <units name="nanoV" units_ref="nanoV"/>
    <units name="nan0" units_ref="nan0"/>
    <units name="kPa" units_ref="kPa"/>
    <units name="L_per_s" units_ref="L_per_s"/>
    <units name="L_per_s_per_kPa" units_ref="L_per_s_per_kPa"/>
    <units name="kPa_per_L" units_ref="kPa_per_L"/>
    <units name="L_per_kPa" units_ref="L_per_kPa"/>
    <units name="kPa_s_per_L" units_ref="kPa_s_per_L"/>
</import>
    <component name="zero_flow">
        <variable name="v_zero" public_interface="out" units="m3_per_s"/>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>v_zero</ci>
                <cn cellml:units="m3_per_s">0</cn>
            </apply>
        </math>
    </component>
    <component name="pv_split_capillary_type">
        <variable name="t" public_interface="in" units="second"/>
        <!-- Constitutive parameters-->
        <!--var mu: Js_per_m3 {pub: in};-->
        <variable name="rho" public_interface="in" units="Js2_per_m5"/>
        <variable name="E" public_interface="in" units="J_per_m3"/>
        <variable name="l" public_interface="in" units="metre"/>
        <variable name="h" public_interface="out" units="metre"/>
        <!--var r: metre {pub: out}; -->
        <!--var r: metre {pub: in};-->
        <variable name="C" public_interface="out" units="m6_per_J"/>
        <variable name="R" public_interface="out" units="Js_per_m6"/>
        <!-- var I: Js2_per_m6 {pub: out};-->
        <variable name="a_vessel" public_interface="in" units="dimensionless"/>
        <variable name="b_vessel" public_interface="in" units="per_m"/>
        <variable name="c_vessel" public_interface="in" units="dimensionless"/>
        <variable name="d_vessel" public_interface="in" units="per_m"/>
        <!-- State Variables-->
        <variable name="u_ext" public_interface="in" units="J_per_m3"/>
        <variable name="u_in" public_interface="in" units="J_per_m3"/>
        <variable name="v" public_interface="out" units="m3_per_s"/>
        <variable name="u" public_interface="out" units="J_per_m3"/>
        <variable name="v_out_1" public_interface="in" units="m3_per_s"/>
        <variable name="v_out_2" public_interface="in" units="m3_per_s"/>
        <variable name="v_out_total" public_interface="out" units="m3_per_s"/>
        <variable name="q_C_init" public_interface="in" units="m3"/>
        <variable initial_value="q_C_init" name="q_C" public_interface="out" units="m3"/>
        <variable name="q" public_interface="out" units="m3"/>
        <variable name="q_us" public_interface="out" units="m3"/>
        <variable name="r_0" public_interface="in" units="metre"/>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>q_us</ci>
                <apply>
                    <times/>
                    <pi/>
                    <apply>
                        <power/>
                        <ci>r_0</ci>
                        <cn cellml:units="dimensionless">2</cn>
                    </apply>
                    <ci>l</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>q</ci>
                <apply>
                    <plus/>
                    <ci>q_us</ci>
                    <ci>q_C</ci>
                </apply>
            </apply>
        </math>
        <variable name="mu" public_interface="out" units="Js_per_m3"/>
        <variable name="mu_rel" public_interface="out" units="dimensionless"/>
        <variable name="mu_plasma" public_interface="in" units="Js_per_m3"/>
        <variable name="r" public_interface="in" units="meter"/>
        <!--insanely stiff model if r formula is uncommented and pub: out, runs fine when set to a constant
r=sqrt(q/(pi*l));-->
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>mu_rel</ci>
                <apply>
                    <minus/>
                    <apply>
                        <plus/>
                        <apply>
                            <times/>
                            <cn cellml:units="dimensionless">220</cn>
                            <apply>
                                <exp/>
                                <apply>
                                    <times/>
                                    <apply>
                                        <minus/>
                                        <cn cellml:units="per_m">1.3</cn>
                                    </apply>
                                    <cn cellml:units="dimensionless">2</cn>
                                    <ci>r</ci>
                                    <cn cellml:units="dimensionless" type="e-notation">1<sep/>6</cn>
                                </apply>
                            </apply>
                        </apply>
                        <cn cellml:units="dimensionless">3.2</cn>
                    </apply>
                    <apply>
                        <times/>
                        <cn cellml:units="dimensionless">2.44</cn>
                        <apply>
                            <exp/>
                            <apply>
                                <times/>
                                <apply>
                                    <minus/>
                                    <cn cellml:units="dimensionless">0.06</cn>
                                </apply>
                                <apply>
                                    <power/>
                                    <apply>
                                        <times/>
                                        <cn cellml:units="per_m">2</cn>
                                        <ci>r</ci>
                                        <cn cellml:units="dimensionless" type="e-notation">1<sep/>6</cn>
                                    </apply>
                                    <cn cellml:units="dimensionless">0.645</cn>
                                </apply>
                            </apply>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>mu</ci>
                <apply>
                    <times/>
                    <ci>mu_rel</ci>
                    <ci>mu_plasma</ci>
                </apply>
            </apply>
            <!--r     = sqrt(q/(pi*l)); inclusion of this formula and r pub: outmake model insanely stiff, unsolvable-->
            <!-- Constitutive Relations-->
            <apply>
                <eq/>
                <ci>h</ci>
                <apply>
                    <times/>
                    <ci>r_0</ci>
                    <apply>
                        <plus/>
                        <apply>
                            <times/>
                            <ci>a_vessel</ci>
                            <apply>
                                <exp/>
                                <apply>
                                    <times/>
                                    <ci>b_vessel</ci>
                                    <ci>r_0</ci>
                                </apply>
                            </apply>
                        </apply>
                        <apply>
                            <times/>
                            <ci>c_vessel</ci>
                            <apply>
                                <exp/>
                                <apply>
                                    <times/>
                                    <ci>d_vessel</ci>
                                    <ci>r_0</ci>
                                </apply>
                            </apply>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <!-- I = rho*l/(pi*sqr(r));-->
            <apply>
                <eq/>
                <ci>C</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <cn cellml:units="dimensionless">2</cn>
                        <pi/>
                        <apply>
                            <power/>
                            <ci>r</ci>
                            <cn cellml:units="dimensionless">3</cn>
                        </apply>
                        <ci>l</ci>
                    </apply>
                    <apply>
                        <times/>
                        <ci>E</ci>
                        <ci>h</ci>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>R</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <cn cellml:units="dimensionless">8</cn>
                        <ci>mu</ci>
                        <ci>l</ci>
                    </apply>
                    <apply>
                        <times/>
                        <pi/>
                        <apply>
                            <power/>
                            <ci>r</ci>
                            <cn cellml:units="dimensionless">4</cn>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <!-- Conservation Laws-->
            <!--ode(v, t) = (u_in-u-R*v)/I;-->
            <apply>
                <eq/>
                <ci>v</ci>
                <apply>
                    <divide/>
                    <apply>
                        <minus/>
                        <ci>u_in</ci>
                        <ci>u</ci>
                    </apply>
                    <ci>R</ci>
                </apply>
            </apply>
            <!-- the below allows non constant compliance-->
            <apply>
                <eq/>
                <ci>v_out_total</ci>
                <apply>
                    <plus/>
                    <ci>v_out_1</ci>
                    <ci>v_out_2</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>q_C</ci>
                </apply>
                <apply>
                    <minus/>
                    <ci>v</ci>
                    <ci>v_out_total</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>u</ci>
                <apply>
                    <plus/>
                    <apply>
                        <divide/>
                        <ci>q_C</ci>
                        <ci>C</ci>
                    </apply>
                    <ci>u_ext</ci>
                </apply>
            </apply>
        </math>
    </component>
    <component name="vp_Min_capillary_type">
        <!-- OK-->
        <variable name="t" public_interface="in" units="second"/>
        <!-- Constitutive parameters-->
        <!--var mu: Js_per_m3 {pub: in};-->
        <variable name="rho" public_interface="in" units="Js2_per_m5"/>
        <variable name="g" public_interface="in" units="m_per_s2"/>
        <variable name="beta_g" public_interface="in" units="dimensionless"/>
        <variable name="theta" public_interface="in" units="dimensionless"/>
        <variable name="E" public_interface="in" units="J_per_m3"/>
        <variable name="l" public_interface="in" units="metre"/>
        <variable name="h" public_interface="out" units="metre"/>
        <variable name="r_0" public_interface="in" units="metre"/>
        <!--var u_0: J_per_m3 {pub: in};
var I: Js2_per_m6 {pub: out};-->
        <variable name="C" public_interface="out" units="m6_per_J"/>
        <variable name="R" public_interface="out" units="Js_per_m6"/>
        <variable name="R_v" public_interface="out" units="Js_per_m6"/>
        <variable name="a_vessel" public_interface="in" units="dimensionless"/>
        <variable name="b_vessel" public_interface="in" units="per_m"/>
        <variable name="c_vessel" public_interface="in" units="dimensionless"/>
        <variable name="d_vessel" public_interface="in" units="per_m"/>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>q_0</ci>
                <apply>
                    <times/>
                    <pi/>
                    <apply>
                        <power/>
                        <ci>r_0</ci>
                        <cn cellml:units="dimensionless">2</cn>
                    </apply>
                    <ci>l</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>q</ci>
                <apply>
                    <plus/>
                    <ci>q_C</ci>
                    <ci>q_0</ci>
                </apply>
            </apply>
        </math>
        <!-- State Variables-->
        <variable name="u" public_interface="out" units="J_per_m3"/>
        <variable name="u_C" public_interface="out" units="J_per_m3"/>
        <!--var v: m3_per_s {init: 0.0, pub: out};-->
        <variable name="v" public_interface="out" units="m3_per_s"/>
        <!--originally the above and using the above would cause need initializing error. the reason is v used to be defined by an ode which needed a initial value to evolve from, but, for capillaries it comes an algebraic equation like (1-2)/4 and if we initialize it to 0, cellml gets confused, it is treating v as a state variable without an ode if initialized!!!-->
        <variable initial_value="0.0" name="q_C" public_interface="out" units="m3"/>
        <variable name="q_0" public_interface="out" units="m3"/>
        <variable name="q" public_interface="out" units="m3"/>
        <variable name="u_ext" public_interface="in" units="J_per_m3"/>
        <variable name="v_in_sum" public_interface="in" units="m3_per_s"/>
        <variable name="u_out" public_interface="in" units="J_per_m3"/>
        <variable name="mu" public_interface="out" units="Js_per_m3"/>
        <variable name="mu_rel" public_interface="out" units="dimensionless"/>
        <variable name="mu_plasma" public_interface="in" units="Js_per_m3"/>
        <variable name="r" public_interface="out" units="meter"/>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>r</ci>
                <apply>
                    <root/>
                    <apply>
                        <divide/>
                        <ci>q</ci>
                        <apply>
                            <times/>
                            <pi/>
                            <ci>l</ci>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>mu_rel</ci>
                <apply>
                    <minus/>
                    <apply>
                        <plus/>
                        <apply>
                            <times/>
                            <cn cellml:units="dimensionless">220</cn>
                            <apply>
                                <exp/>
                                <apply>
                                    <times/>
                                    <apply>
                                        <minus/>
                                        <cn cellml:units="per_m">1.3</cn>
                                    </apply>
                                    <cn cellml:units="dimensionless">2</cn>
                                    <ci>r</ci>
                                    <cn cellml:units="dimensionless" type="e-notation">1<sep/>6</cn>
                                </apply>
                            </apply>
                        </apply>
                        <cn cellml:units="dimensionless">3.2</cn>
                    </apply>
                    <apply>
                        <times/>
                        <cn cellml:units="dimensionless">2.44</cn>
                        <apply>
                            <exp/>
                            <apply>
                                <times/>
                                <apply>
                                    <minus/>
                                    <cn cellml:units="dimensionless">0.06</cn>
                                </apply>
                                <apply>
                                    <power/>
                                    <apply>
                                        <times/>
                                        <cn cellml:units="per_m">2</cn>
                                        <ci>r</ci>
                                        <cn cellml:units="dimensionless" type="e-notation">1<sep/>6</cn>
                                    </apply>
                                    <cn cellml:units="dimensionless">0.645</cn>
                                </apply>
                            </apply>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>mu</ci>
                <apply>
                    <times/>
                    <ci>mu_rel</ci>
                    <ci>mu_plasma</ci>
                </apply>
            </apply>
            <!-- Constitutive Relations-->
            <apply>
                <eq/>
                <ci>h</ci>
                <apply>
                    <times/>
                    <ci>r_0</ci>
                    <apply>
                        <plus/>
                        <apply>
                            <times/>
                            <ci>a_vessel</ci>
                            <apply>
                                <exp/>
                                <apply>
                                    <times/>
                                    <ci>b_vessel</ci>
                                    <ci>r_0</ci>
                                </apply>
                            </apply>
                        </apply>
                        <apply>
                            <times/>
                            <ci>c_vessel</ci>
                            <apply>
                                <exp/>
                                <apply>
                                    <times/>
                                    <ci>d_vessel</ci>
                                    <ci>r_0</ci>
                                </apply>
                            </apply>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <!--I   = rho*l/(pi*sqr(r_0));-->
            <apply>
                <eq/>
                <ci>C</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <cn cellml:units="dimensionless">2</cn>
                        <pi/>
                        <apply>
                            <power/>
                            <ci>r_0</ci>
                            <cn cellml:units="dimensionless">3</cn>
                        </apply>
                        <ci>l</ci>
                    </apply>
                    <apply>
                        <times/>
                        <ci>E</ci>
                        <ci>h</ci>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>R</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <cn cellml:units="dimensionless">8</cn>
                        <ci>mu</ci>
                        <ci>l</ci>
                    </apply>
                    <apply>
                        <times/>
                        <pi/>
                        <apply>
                            <power/>
                            <ci>r_0</ci>
                            <cn cellml:units="dimensionless">4</cn>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>R_v</ci>
                <apply>
                    <divide/>
                    <cn cellml:units="second">0.01</cn>
                    <ci>C</ci>
                </apply>
            </apply>
            <!-- Conservation Laws-->
            <!--ode(v, t)   = (u-u_out-R*v-beta_g*rho*g*l*cos(theta*pi/180{dimensionless}))/I;-->
            <apply>
                <eq/>
                <ci>v</ci>
                <apply>
                    <divide/>
                    <apply>
                        <minus/>
                        <ci>u</ci>
                        <ci>u_out</ci>
                    </apply>
                    <ci>R</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>q_C</ci>
                </apply>
                <apply>
                    <minus/>
                    <ci>v_in_sum</ci>
                    <ci>v</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>u_C</ci>
                <apply>
                    <divide/>
                    <ci>q_C</ci>
                    <ci>C</ci>
                </apply>
            </apply>
            <!--u           = u_0+u_C+u_ext+R_v*(v_in_sum-v);-->
            <apply>
                <eq/>
                <ci>u</ci>
                <apply>
                    <plus/>
                    <ci>u_C</ci>
                    <ci>u_ext</ci>
                </apply>
            </apply>
        </math>
    </component>
    <component name="pp_capillary_type">
        <variable name="t" public_interface="in" units="second"/>
        <!-- Constitutive parameters-->
        <!--var mu: Js_per_m3 {pub: in};-->
        <variable name="rho" public_interface="in" units="Js2_per_m5"/>
        <variable name="E" public_interface="in" units="J_per_m3"/>
        <variable name="l" public_interface="in" units="metre"/>
        <variable name="h" public_interface="out" units="metre"/>
        <variable name="r" public_interface="in" units="metre"/>
        <variable name="C" public_interface="out" units="m6_per_J"/>
        <variable name="R" public_interface="out" units="Js_per_m6"/>
        <!-- var I: Js2_per_m6 {pub: out};-->
        <variable name="a_vessel" public_interface="in" units="dimensionless"/>
        <variable name="b_vessel" public_interface="in" units="per_m"/>
        <variable name="c_vessel" public_interface="in" units="dimensionless"/>
        <variable name="d_vessel" public_interface="in" units="per_m"/>
        <!-- State Variables-->
        <variable name="u_ext" public_interface="in" units="J_per_m3"/>
        <variable name="u_in" public_interface="in" units="J_per_m3"/>
        <variable name="v" public_interface="out" units="m3_per_s"/>
        <variable name="u" public_interface="out" units="J_per_m3"/>
        <variable name="v_d" public_interface="out" units="m3_per_s"/>
        <variable name="u_out" public_interface="in" units="J_per_m3"/>
        <variable name="q_C_init" public_interface="in" units="m3"/>
        <variable initial_value="q_C_init" name="q_C" public_interface="out" units="m3"/>
        <variable name="q" public_interface="out" units="m3"/>
        <variable name="q_us" public_interface="out" units="m3"/>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>q_us</ci>
                <apply>
                    <times/>
                    <pi/>
                    <apply>
                        <power/>
                        <ci>r</ci>
                        <cn cellml:units="dimensionless">2</cn>
                    </apply>
                    <ci>l</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>q</ci>
                <apply>
                    <plus/>
                    <ci>q_us</ci>
                    <ci>q_C</ci>
                </apply>
            </apply>
        </math>
        <variable name="mu" public_interface="out" units="Js_per_m3"/>
        <variable name="mu_rel" public_interface="out" units="dimensionless"/>
        <variable name="mu_plasma" public_interface="in" units="Js_per_m3"/>
        <!--var r: meter {pub: out};
r=sqrt(q/(pi*l));-->
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>mu_rel</ci>
                <apply>
                    <minus/>
                    <apply>
                        <plus/>
                        <apply>
                            <times/>
                            <cn cellml:units="dimensionless">220</cn>
                            <apply>
                                <exp/>
                                <apply>
                                    <times/>
                                    <apply>
                                        <minus/>
                                        <cn cellml:units="per_m">1.3</cn>
                                    </apply>
                                    <cn cellml:units="dimensionless">2</cn>
                                    <ci>r</ci>
                                    <cn cellml:units="dimensionless" type="e-notation">1<sep/>6</cn>
                                </apply>
                            </apply>
                        </apply>
                        <cn cellml:units="dimensionless">3.2</cn>
                    </apply>
                    <apply>
                        <times/>
                        <cn cellml:units="dimensionless">2.44</cn>
                        <apply>
                            <exp/>
                            <apply>
                                <times/>
                                <apply>
                                    <minus/>
                                    <cn cellml:units="dimensionless">0.06</cn>
                                </apply>
                                <apply>
                                    <power/>
                                    <apply>
                                        <times/>
                                        <cn cellml:units="per_m">2</cn>
                                        <ci>r</ci>
                                        <cn cellml:units="dimensionless" type="e-notation">1<sep/>6</cn>
                                    </apply>
                                    <cn cellml:units="dimensionless">0.645</cn>
                                </apply>
                            </apply>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>mu</ci>
                <apply>
                    <times/>
                    <ci>mu_rel</ci>
                    <ci>mu_plasma</ci>
                </apply>
            </apply>
            <!-- Constitutive Relations-->
            <apply>
                <eq/>
                <ci>h</ci>
                <apply>
                    <times/>
                    <ci>r</ci>
                    <apply>
                        <plus/>
                        <apply>
                            <times/>
                            <ci>a_vessel</ci>
                            <apply>
                                <exp/>
                                <apply>
                                    <times/>
                                    <ci>b_vessel</ci>
                                    <ci>r</ci>
                                </apply>
                            </apply>
                        </apply>
                        <apply>
                            <times/>
                            <ci>c_vessel</ci>
                            <apply>
                                <exp/>
                                <apply>
                                    <times/>
                                    <ci>d_vessel</ci>
                                    <ci>r</ci>
                                </apply>
                            </apply>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <!-- I = rho*l/(pi*sqr(r));-->
            <apply>
                <eq/>
                <ci>C</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <cn cellml:units="dimensionless">2</cn>
                        <pi/>
                        <apply>
                            <power/>
                            <ci>r</ci>
                            <cn cellml:units="dimensionless">3</cn>
                        </apply>
                        <ci>l</ci>
                    </apply>
                    <apply>
                        <times/>
                        <ci>E</ci>
                        <ci>h</ci>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>R</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <cn cellml:units="dimensionless">8</cn>
                        <ci>mu</ci>
                        <ci>l</ci>
                    </apply>
                    <apply>
                        <times/>
                        <pi/>
                        <apply>
                            <power/>
                            <ci>r</ci>
                            <cn cellml:units="dimensionless">4</cn>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <!-- Conservation Laws-->
            <!--ode(v, t)   = (u_in-u-v*R/2{dimensionless})/I;-->
            <apply>
                <eq/>
                <ci>v</ci>
                <apply>
                    <divide/>
                    <apply>
                        <minus/>
                        <ci>u_in</ci>
                        <ci>u</ci>
                    </apply>
                    <apply>
                        <divide/>
                        <ci>R</ci>
                        <cn cellml:units="dimensionless">2</cn>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>q_C</ci>
                </apply>
                <apply>
                    <minus/>
                    <ci>v</ci>
                    <ci>v_d</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>u</ci>
                <apply>
                    <plus/>
                    <apply>
                        <divide/>
                        <ci>q_C</ci>
                        <ci>C</ci>
                    </apply>
                    <ci>u_ext</ci>
                </apply>
            </apply>
            <!-- ode(v_d, t) = (u-u_out-v_d*R/2{dimensionless})/I;-->
            <apply>
                <eq/>
                <ci>v_d</ci>
                <apply>
                    <divide/>
                    <apply>
                        <minus/>
                        <ci>u</ci>
                        <ci>u_out</ci>
                    </apply>
                    <apply>
                        <divide/>
                        <ci>R</ci>
                        <cn cellml:units="dimensionless">2</cn>
                    </apply>
                </apply>
            </apply>
        </math>
    </component>
</model>
